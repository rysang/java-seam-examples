<div xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html" xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets">

	<p:panel id="panelComplaints" header="#{ctrlm['list.of.complaints.title.open.complaints']}"
		style="margin-bottom:10px;width: 100%">
		<h:form id="formComplaints">

			<p:toolbar>
				<p:toolbarGroup align="right">
					<h:panelGrid columns="6">
						<p:commandButton value="#{ctrlm['list.of.complaints.new.complaint']}" ajax="false"
							action="#{complaintActions.createComplaint}" />
						<p:commandButton id="delBtn" value="#{ctrlm['more.translations.delete']}"
							action="#{complaintActions.deleteSelComplaints}" update="formComplaints" />
					</h:panelGrid>
				</p:toolbarGroup>
			</p:toolbar>

			<p:dataTable id="unlockedComplDt" var="entry" value="#{complaintActions.getUnlockedComplaints(currentUser.username)}"
				widgetVar="complaintTable" emptyMessage="No complaints found with given criteria" paginator="true" rows="10"
				paginatorPosition="bottom"
				paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
				rowsPerPageTemplate="5,10,15" paginatorAlwaysVisible="false">

				<p:column id="refColumn" sortBy="#{entry.complaintSet.reference}"
					headerText="#{ctrlm['list.of.complaints.reference']}" filterMatchMode="contains">
					<h:outputText value="#{entry.complaintSet.reference}" />
				</p:column>

				<p:column id="dateColumn" sortBy="#{entry.complaintSet.modification_date}"
					headerText="#{ctrlm['list.of.complaints.date']}" filterMatchMode="contains">
					<h:outputText value="#{entry.complaintSet.modification_date}" />
				</p:column>

				<p:column id="consNameColumn" sortBy="#{entry.complaintSet.contact_name}"
					headerText="#{ctrlm['list.of.complaints.consumer.name']}" filterMatchMode="contains">
					<h:outputText value="#{entry.complaintSet.contact_name}" />
				</p:column>

				<p:column id="distinctionColumn" sortBy="#{entry.complaintSet.distinction}"
					headerText="#{ctrlm['list.of.complaints.distinction']}" filterMatchMode="contains">
					<h:outputText value="#{entry.complaintSet.distinction}" />
				</p:column>

				<p:column id="sectorColumn" sortBy="#{entry.complaintSet.sector}" headerText="#{ctrlm['list.of.complaints.sector']}"
					filterMatchMode="contains">
					<h:outputText value="#{entry.complaintSet.sector}" />
				</p:column>

				<p:column id="typesColumn" sortBy="#{complaintActions.transfComplTypes(entry.complaintSet)}"
					headerText="#{ctrlm['list.of.complaints.type.of.complaint']}" filterMatchMode="contains">
					<h:outputText value="#{complaintActionentry.complaintSetomplTypes(entry.complaintSet)}" escape="false" />
				</p:column>

				<p:column>
					<p:commandLink value="Edit" action="#{complaintActions.editComplaint(entry)}" />
				</p:column>

				<p:column>
					<p:commandLink value="Delete" action="#{complaintActions.deleteComplaint(entry)}" update="@form" />
				</p:column>

				<p:column>
					<p:selectBooleanCheckbox id="selected" value="#{entry.selected}">
						<p:ajax update="selected" />
					</p:selectBooleanCheckbox>
				</p:column>
			</p:dataTable>
			<p:blockUI block="unlockedComplDt" trigger="unlockedComplDt,delBtn">
				<h:outputText value="#{ctrlm['submissions.loading']}" />
			</p:blockUI>

		</h:form>

	</p:panel>

</div>